---
import qs from "qs";

const homePageQuery = qs.stringify(
	{
		populate: {
			blocks: {
				populate: "*",
			},
		},
	},
	{ encodeValuesOnly: true },
);

async function getStrapiData(path: string) {
	const BASE_URL = import.meta.env.PUBLIC_BACKEND_URL;
	const url = new URL(path, BASE_URL);
	url.search = homePageQuery;

	try {
		const res = await fetch(url.href);
		const json = await res.json();
		return json.data;
	} catch (error) {
		console.error("Strapi fetch error:", error);
	}
}

const data = await getStrapiData("/api/home-page");

const hero = data?.blocks?.find(
	(b: any) => b.__component === "layout.hero-section",
);
---

<!-- <main>
			<section id="hero">
				<h1>
					{data.heading}
					<br />
					{data.description}

					<p>{hero?.subHeading}</p>

					{
						hero?.image && (
							<img
								src={`${import.meta.env.PUBLIC_BACKEND_URL}${hero.image.url}`}
								alt={hero.image.alternativeText || "Hero Image"}
								width={400}
								height={"auto"}
								fetchpriority="high"
							/>
						)
					}
				</h1>
			</section>
		</main> -->
<div
	style="width: 100vw; height: 100%; padding-top: 102px; position: relative; z-index: 2; overflow: hidden;"
>
	<p
		style="color: rgb(0, 0, 0); text-align: center; font-family: Inter; font-size: 46px; font-style: normal; font-weight: 600; line-height: 120%; letter-spacing: -0.46px; margin-bottom: 0px;"
	>
		Master Any Concept in 2 Minutes
	</p><p
		style="text-align: center; margin: 22px 0px 48px; font-family: Inter; font-size: 18px; font-style: normal; font-weight: 400; line-height: 140%; color: rgb(63, 63, 63);"
	>
		Short video answers. Trusted by 1 Million+ learners.
	</p><div
		style="margin: 0px auto; width: 950px; height: 207px; border: 0.5px solid rgba(179, 179, 179, 0.6); border-radius: 32px; padding: 22px 20px 18px 21px; display: flex; flex-direction: row; justify-content: space-between; background: rgb(255, 255, 255); box-shadow: rgba(43, 126, 215, 0.06) 0px 0px 20px 0px, rgba(27, 103, 186, 0.1) 0px 0px 12px 0px;"
	>
		<div style="position: relative; padding: 0px 14px; flex: 1 1 0%;">
			<textarea
				placeholder="What do you want to learn today?"
				class="ant-input css-vrrzze ant-input-outlined hide-scrollbar2 custom-textarea"
				style="resize: none; height: 165px; padding: 0px; border: none; border-radius: 0px; outline: none; box-shadow: none; overflow-y: scroll; margin-bottom: 16px; color: var(--Black, #000); font-family: Inter; font-size: 16px; font-style: normal; font-weight: 400; line-height: normal; opacity: 0.8;"
			></textarea>
		</div><div
			style="width: auto; height: 100%; display: flex; justify-content: end; align-items: end;"
		>
			<button
				type="button"
				class="ant-btn css-vrrzze ant-btn-default ant-btn-color-default ant-btn-variant-outlined"
				disabled=""
				style="height: 36px; width: 36px; padding: 10px 9px; display: flex; align-items: center; justify-content: center; background-color: rgb(33, 131, 237); color: rgb(255, 255, 255); border-radius: 50%; opacity: 0.5; transform: rotate(-90deg); border: none; outline: none; box-shadow: none;"
				><img
					alt="Arrow"
					src="/static/media/Arrow.30e27a539af6f9677c221e48be2d1eb0.svg"
					style="height: 18px; width: 18px; margin: 0px;"
				/></button>
		</div>
	</div><div
		style="width: 950px; margin: 34px auto 179px; display: flex; flex-direction: row; justify-content: center;"
	>
		<div style="display: flex; gap: 16px; flex-wrap: wrap;">
			<div
				style="display: flex; align-items: center; gap: 10px; padding: 12px 20px 12px 12px; border-radius: 98.919px; border: 1px solid rgba(0, 0, 0, 0.1); background: rgb(255, 255, 255); cursor: pointer; font-size: 13px; color: rgb(63, 63, 63); font-family: Inter; line-height: normal; font-style: normal; font-weight: 400; height: 42px;"
			>
				<img
					alt="icon"
					src="/static/media/Leaf.8c975f76c91e52a042a40fa450b50c8a.svg"
					style="width: 16px; height: 16px;"
				/>What is photosynthesis?
			</div><div
				style="display: flex; align-items: center; gap: 10px; padding: 12px 20px 12px 12px; border-radius: 98.919px; border: 1px solid rgba(0, 0, 0, 0.1); background: rgb(255, 255, 255); cursor: pointer; font-size: 13px; color: rgb(63, 63, 63); font-family: Inter; line-height: normal; font-style: normal; font-weight: 400; height: 42px;"
			>
				<img
					alt="icon"
					src="/static/media/Ball.bd05e7f7a414aeccd77beac674b0b9fb.svg"
					style="width: 16px; height: 16px;"
				/>Explain Newton's laws of motion
			</div><div
				style="display: flex; align-items: center; gap: 10px; padding: 12px 20px 12px 12px; border-radius: 98.919px; border: 1px solid rgba(0, 0, 0, 0.1); background: rgb(255, 255, 255); cursor: pointer; font-size: 13px; color: rgb(63, 63, 63); font-family: Inter; line-height: normal; font-style: normal; font-weight: 400; height: 42px;"
			>
				<img
					alt="icon"
					src="/static/media/Announce.8c6622edc19b6420fef74203fa03d0ec.svg"
					style="width: 16px; height: 16px;"
				/>Illustrate the '4 Ps of Marketing'
			</div>
		</div>
	</div>
</div>
<style>
	#background {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: -1;
		filter: blur(100px);
		background-color: #fff;
		font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova",
			"Nimbus Sans", Arial, sans-serif;
	}

	#container {
		/* height: 100%; */
	}

	main {
		height: 100%;
		display: flex;
		justify-content: center;
	}

	#hero {
		display: flex;
		align-items: start;
		flex-direction: column;
		justify-content: center;
		padding: 16px;
	}

	h1 {
		font-size: 22px;
		margin-top: 0.25em;
	}

	#links {
		display: flex;
		gap: 16px;
	}

	#links a {
		display: flex;
		align-items: center;
		padding: 10px 12px;
		color: #111827;
		text-decoration: none;
		transition: color 0.2s;
	}

	#links a:hover {
		color: rgb(78, 80, 86);
	}

	#links a svg {
		height: 1em;
		margin-left: 8px;
	}

	#links a.button {
		color: white;
		background: linear-gradient(83.21deg, #3245ff 0%, #bc52ee 100%);
		box-shadow:
			inset 0 0 0 1px rgba(255, 255, 255, 0.12),
			inset 0 -2px 0 rgba(0, 0, 0, 0.24);
		border-radius: 10px;
	}

	#links a.button:hover {
		color: rgb(230, 230, 230);
		box-shadow: none;
	}

	pre {
		font-family: ui-monospace, "Cascadia Code", "Source Code Pro", Menlo,
			Consolas, "DejaVu Sans Mono", monospace;
		font-weight: normal;
		background: linear-gradient(14deg, #d83333 0%, #f041ff 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		margin: 0;
	}

	h2 {
		margin: 0 0 1em;
		font-weight: normal;
		color: #111827;
		font-size: 20px;
	}

	p {
		color: #4b5563;
		font-size: 16px;
		line-height: 24px;
		letter-spacing: -0.006em;
		margin: 0;
	}

	code {
		display: inline-block;
		background:
			linear-gradient(66.77deg, #f3cddd 0%, #f5cee7 100%) padding-box,
			linear-gradient(155deg, #d83333 0%, #f041ff 18%, #f5cee7 45%)
				border-box;
		border-radius: 8px;
		border: 1px solid transparent;
		padding: 6px 8px;
	}

	.box {
		padding: 16px;
		background: rgba(255, 255, 255, 1);
		border-radius: 16px;
		border: 1px solid white;
	}

	#news {
		position: absolute;
		bottom: 16px;
		right: 16px;
		max-width: 300px;
		text-decoration: none;
		transition: background 0.2s;
		backdrop-filter: blur(50px);
	}

	#news:hover {
		background: rgba(255, 255, 255, 0.55);
	}

	@media screen and (max-height: 368px) {
		#news {
			display: none;
		}
	}

	@media screen and (max-width: 768px) {
		#container {
			display: flex;
			flex-direction: column;
		}

		#hero {
			display: block;
			padding-top: 10%;
		}

		#links {
			flex-wrap: wrap;
		}

		#links a.button {
			padding: 14px 18px;
		}

		#news {
			right: 16px;
			left: 16px;
			bottom: 2.5rem;
			max-width: 100%;
		}

		h1 {
			line-height: 1.5;
		}
	}
</style>
